<beans
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
	    http://www.springframework.org/schema/beans/spring-beans.xsd"
        xmlns="http://www.springframework.org/schema/beans">

    <bean name="autowiringSpringBeanJobFactory"
          class="com.bbd.common.AutowiringSpringBeanJobFactory"/>

    <bean id="timeZone" class="java.util.TimeZone" factory-method="getTimeZone">
        <constructor-arg value="GMT+08:00"/>
    </bean>

    <!--<bean id="quartzDataSource"-->
    <!--class="org.springframework.jdbc.datasource.DriverManagerDataSource">-->
    <!--<property name="driverClassName" value="${jdbc.driverClassName}"/>-->
    <!--<property name="url" value="${jdbc.url}"/>-->
    <!--<property name="username" value="${jdbc.username}"/>-->
    <!--<property name="password" value="${jdbc.password}"/>-->
    <!--</bean>-->

    <bean id="annualRemindMannualEmailSendJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.AnnualRemindManualEmailSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="annualRemindMannualEmailSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="annualRemindMannualEmailSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="0 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="lostRemindMannualEmailSendJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.LostRemindManualEmailSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="lostRemindMannualEmailSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="lostRemindMannualEmailSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="5 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="unannualRemindMannualEmailSendJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.UnannualRemindManualEmailSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="unannualRemindMannualEmailSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="unannualRemindMannualEmailSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="10 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="unpublicityRemindMannualEmailSendJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.UnpublicityRemindManualEmailSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="unpublicityRemindMannualEmailSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="unpublicityRemindMannualEmailSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="15 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="fakeInfoRemindMannualEmailSendJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.FakeInfoRemindManualEmailSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="fakeInfoRemindMannualEmailSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="fakeInfoRemindMannualEmailSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="20 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>


    <bean id="annualRemindMannualSmsSendJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.AnnualRemindManualSmsSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="annualRemindMannualSmsSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="annualRemindMannualSmsSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="25 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="lostRemindMannualSmsSendJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.LostRemindManualSmsSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="lostRemindMannualSmsSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="lostRemindMannualSmsSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="30 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="unannualRemindMannualSmsSendJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.UnannualRemindManualSmsSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="unannualRemindMannualSmsSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="unannualRemindMannualSmsSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="35 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="unpublicityRemindMannualSmsSendJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.UnpublicityRemindManualSmsSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="unpublicityRemindMannualSmsSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="unpublicityRemindMannualSmsSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="40 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="fakeInfoRemindMannualSmsSendJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.FakeInfoRemindManualSmsSendJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="fakeInfoRemindMannualSmsSendJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="fakeInfoRemindMannualSmsSendJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="45 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>


    <bean id="messageDetailGenerateJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.TaskMessageDetailGenerateJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="messageDetailGenerateJobTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="messageDetailGenerateJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="50 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="autoRemindGenerateJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.AutoRemindGenerateJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="autoRemindGenerateJobTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="autoRemindGenerateJobDetail"/>
        <property name="startDelay" value="10000"/>
        <property name="cronExpression" value="55 0/5 5-23 * * ?"/>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <!--<bean id="autoRemindMessageSendJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">-->
    <!--<property name="jobClass" value="com.bbd.service.job.remind.AutoRemindMessageSendJob"></property>-->
    <!--<property name="durability" value="true"></property>-->
    <!--</bean>-->

    <!--<bean id="autoRemindMessageSendJobTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">-->
    <!--<property name="jobDetail" ref="autoRemindMessageSendJobDetail"/>-->
    <!--<property name="startDelay" value="10000"/>-->
    <!--<property name="cronExpression" value="0 0/5 5-23 * * ?"/>-->
    <!--<property name="misfireInstruction" value="2"></property>-->
    <!--<property name="timeZone" ref="timeZone"/>-->
    <!--</bean>-->

    <bean id="companyRemindSendDailyCountJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.CompanyRemindSendDailyCountJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="companyRemindSendDailyCountJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="companyRemindSendDailyCountJobDetail"/>
        <property name="cronExpression" value="0 0 5-23 * * ?"/>
        <property name="startDelay" value="10000"></property>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="companyRemindSendMonthlyCountJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.remind.CompanyRemindSendMonthlyCountJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="companyRemindSendMonthlyCountJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="companyRemindSendMonthlyCountJobDetail"/>
        <property name="cronExpression" value="0 20 5 * * ?"/>
        <property name="startDelay" value="10000"></property>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="companyActivityCalculateJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.activity.CompanyActivityCalculateJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="companyActivityCalculateJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="companyActivityCalculateJobDetail"/>
        <property name="cronExpression" value="0 0/5 5-23 * * ?"/>
        <property name="startDelay" value="10000"></property>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="companyESSyncJobDetail"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.company.CompanyESSyncJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="companyESSyncJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="companyESSyncJobDetail"/>
        <property name="cronExpression" value="0 0/30 5-22 * * ?"/>
        <property name="startDelay" value="60000"></property>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="companyBusinessRecordSyncJob"
          class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.bbd.service.job.company.CompanyBusinessRecordSyncJob"></property>
        <property name="durability" value="true"></property>
    </bean>

    <bean id="companyBusinessRecordSyncJobTrigger"
          class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="companyBusinessRecordSyncJob"/>
        <property name="cronExpression" value="0 0/5 5-22 * * ?"/>
        <property name="startDelay" value="60000"></property>
        <property name="misfireInstruction" value="2"></property>
        <property name="timeZone" ref="timeZone"/>
    </bean>

    <bean id="schedulerFactoryBean" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource"/>
        </property>
        <!-- 是org.springframework.scheduling.quartz.SchedulerFactoryBean这个类中把spring上下
			文以key/value的方式存放在了quartz的上下文中了，可以用applicationContextSchedulerContextKey所定义的key得到对应的spring上下文 -->
        <property name="applicationContextSchedulerContextKey" value="applicationContext"/>
        <!-- 需要overwrite已经存在的job，如果需要动态的修改已经存在的job，就需要设置为true，否则会以数据库中已经存在的为准 -->
        <property name="overwriteExistingJobs" value="true"/>
        <!-- 在job中可以注入spring管理的类 -->
        <property name="jobFactory" ref="autowiringSpringBeanJobFactory"/>
        <property name="quartzProperties">
            <props>
                <prop key="org.quartz.scheduler.instanceName">bbdScheduler</prop>
                <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
                <!-- 线程池配置 -->
                <prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
                <prop key="org.quartz.threadPool.threadCount">20</prop>
                <prop key="org.quartz.threadPool.threadPriority">5</prop>
                <prop key="org.quartz.jobStore.misfireThreshold">10000</prop>
                <!-- JobStore 配置 -->
                <prop key="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.JobStoreTX</prop>
                <!-- 集群配置 -->
                <prop key="org.quartz.jobStore.isClustered">true</prop>
                <prop key="org.quartz.jobStore.clusterCheckinInterval">15000</prop>
                <prop key="org.quartz.jobStore.maxMisfiresToHandleAtATime">1</prop>
                <!-- 数据表设置 -->
                <prop key="org.quartz.jobStore.tablePrefix">qrtz_</prop>
                <prop key="org.quartz.jobStore.dataSource">qzDS</prop>
            </props>
        </property>
        <property name="triggers">
            <list>
<!--                &lt;!&ndash; 通过任务生成消息 &ndash;&gt;
                <ref bean="messageDetailGenerateJobTrigger"/>
                &lt;!&ndash; 消息发送 &ndash;&gt;
                <ref bean="annualRemindMannualEmailSendJobTrigger"/>
                <ref bean="lostRemindMannualEmailSendJobTrigger"/>
                <ref bean="unannualRemindMannualEmailSendJobTrigger"/>
                <ref bean="unpublicityRemindMannualEmailSendJobTrigger"/>
                <ref bean="fakeInfoRemindMannualEmailSendJobTrigger"/>
                <ref bean="annualRemindMannualSmsSendJobTrigger"/>
                <ref bean="lostRemindMannualSmsSendJobTrigger"/>
                <ref bean="unannualRemindMannualSmsSendJobTrigger"/>
                <ref bean="unpublicityRemindMannualSmsSendJobTrigger"/>
                <ref bean="fakeInfoRemindMannualSmsSendJobTrigger"/>
                &lt;!&ndash; 根据自动提示配置生成任务 &ndash;&gt;
                <ref bean="autoRemindGenerateJobTrigger"/>
                &lt;!&ndash; 自动提示任务所生成消息发送 &ndash;&gt;
                &lt;!&ndash;<ref bean="autoRemindMessageSendJobTrigger"/>&ndash;&gt;
                &lt;!&ndash; 消息发送统计 &ndash;&gt;
                <ref bean="companyRemindSendDailyCountJobTrigger"/>
                <ref bean="companyRemindSendMonthlyCountJobTrigger"/>
                &lt;!&ndash; 经营活动算分 &ndash;&gt;
                <ref bean="companyActivityCalculateJobTrigger"/>-->
                <!-- es 数据同步 -->
                <ref bean="companyESSyncJobTrigger"/>
                <!-- 同步企业经营活动信息到企业表 -->
                <!--<ref bean="companyBusinessRecordSyncJobTrigger"/>-->
            </list>
        </property>
    </bean>

</beans>